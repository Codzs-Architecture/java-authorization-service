spring:
  application:
    name: java-authorization-service

  security:
    # user:
    #   name: authorization-service-user
    #   password: ${authorization.password}
    #   roles: MANAGEMENT_ADMIN
    oauth2:
      client:
        registration:
          google-idp:
            provider: google
            client-id: ${GOOGLE_CLIENT_ID:google-client-id}
            client-secret: ${GOOGLE_CLIENT_SECRET:google-client-secret}
            scope: openid, https://www.googleapis.com/auth/userinfo.profile, https://www.googleapis.com/auth/userinfo.email
            client-name: Sign in with Google
          github-idp:
            provider: github
            client-id: ${GITHUB_CLIENT_ID:github-client-id}
            client-secret: ${GITHUB_CLIENT_SECRET:github-client-secret}
            scope: user:email, read:user
            client-name: Sign in with GitHub
        provider:
          google:
            user-name-attribute: email
          github:
            user-name-attribute: login

  profiles:
    include: keystore,config-service

  # Flyway configuration to handle existing schemas  
  # flyway:
  #   baseline-on-migrate: true
  #   baseline-version: 0

  # Spring WebMVC configuration to handle exception conflicts
  # mvc:
  #   problemdetails:
  #     enabled: false

  # Exclude conflicting auto-configurations  
  # autoconfigure:
  #   exclude:
  #     - org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration

  # # Disable problematic beans
  # main:
  #   allow-bean-definition-overriding: true

# Entry to show this information on spring boot admin
#info:
#  app:
#    encoding: @project.build.sourceEncoding@
#    java:
#      source: @java.version@
#      target: @java.version@

# Management-specific configuration
management:
  server:
    port: 6003
  endpoints:
    web:
      exposure:
        exclude: "restResponseEntityExceptionHandler"

server:
  port: 5003

# Logging configuration to suppress specific warnings
logging:
  level:
    root: INFO
    org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver: ERROR
    org.springframework.web.method.HandlerMethodMappingNamingStrategy: ERROR
    org.springframework.web: INFO
    org.springframework.security: INFO
    org.springframework.security.oauth2: INFO

acl:
  redis:
    cache:
      key: com.codzs.acl.cache.local
