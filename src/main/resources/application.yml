spring:
  application:
    name: java-authorization-service

  # OAuth2 and security headers configurations moved to config server
  # See: java-codzs-config/management-domain/java-authorization-service/

  profiles:
    include: keystore,config-service

  main:
    allow-bean-definition-overriding: true

  # Flyway configuration to handle existing schemas  
  flyway:
    baseline-on-migrate: true
    baseline-version: 0
    enabled: true
    locations: classpath:db/migration
    validate-on-migrate: false
    clean-disabled: false
    # Handle existing databases by checking if tables exist
    baseline-description: "Baseline existing database"
    # Only apply new migrations
    out-of-order: true

# Entry to show this information on spring boot admin
#info:
#  app:
#    encoding: @project.build.sourceEncoding@
#    java:
#      source: @java.version@
#      target: @java.version@

# Management-specific configuration
management:
  server:
    port: 6003

server:
  port: 5003

# Logging configuration
logging:
  level:
    root: INFO
    org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver: ERROR
    org.springframework.web.method.HandlerMethodMappingNamingStrategy: ERROR
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG
    org.springframework.security.oauth2: DEBUG
    org.springframework.security.web: DEBUG
    org.springframework.security.authentication: DEBUG
    org.springframework.security.authorization: DEBUG
    org.springframework.security.web.authentication: DEBUG
    org.springframework.security.web.access: DEBUG
    org.springframework.security.oauth2.server.authorization: DEBUG
    org.springframework.security.oauth2.server.authorization.web: DEBUG
    org.springframework.security.oauth2.server.authorization.authentication: DEBUG
    org.springframework.security.oauth2.server.authorization.client: DEBUG
    org.springframework.security.oauth2.server.authorization.oidc: DEBUG
    org.springframework.security.oauth2.core: DEBUG
    org.springframework.security.oauth2.jose: DEBUG
    org.springframework.security.oauth2.jwt: DEBUG
    org.springframework.jdbc: DEBUG
    org.springframework.web.client: DEBUG
    org.springframework.http: DEBUG
    com.codzs: DEBUG

acl:
  redis:
    cache:
      key: com.codzs.acl.cache.local

# Security headers, CORS, and device security configurations moved to config server
# for environment-specific customization


